<!-- Error State -->
<ng-container *ngIf="(!isValidRegistrationLink || hasEulaLoadError) && !isLoading">
    <div class="pxb-create-account-invite-content-error-state">
        <!-- TODO: How should we handle error states? -->
        <pxb-empty-state title="Error" description="There was an error during account registration.">
            <mat-icon pxb-empty-icon>error</mat-icon>
        </pxb-empty-state>
    </div>
    <mat-divider class="pxb-auth-divider" style="margin-bottom: 16px;"></mat-divider>
    <div class="pxb-auth-action-button-container">
        <button mat-flat-button color="primary" (click)="navigateToLogin()" [style.width.%]="100">Okay</button>
    </div>
</ng-container>

<ng-container *ngIf="isValidRegistrationLink && !hasEulaLoadError && !isLoading">
    <pxb-create-account-eula-step
        *ngIf="currentPageId === 0"
        [eula]="licenseAgreement"
        [(userAcceptsEula)]="userAcceptsEula"
    ></pxb-create-account-eula-step>

    <pxb-create-account-create-password-step
        *ngIf="currentPageId === 1"
        [(password)]="password"
        [(passwordMeetsRequirements)]="passwordMeetsRequirements"
    ></pxb-create-account-create-password-step>

    <pxb-create-account-account-details-step
        *ngIf="currentPageId === 2"
        [(firstName)]="firstName"
        [(lastName)]="lastName"
        [(phoneNumber)]="phoneNumber"
        [(validAccountDetails)]="validAccountDetails"
    >
    </pxb-create-account-account-details-step>

    <div class="pxb-create-account-invite-content" *ngIf="currentPageId === 3" style="justify-content: center;">
        <pxb-empty-state
            class="pxb-create-account-invite-success"
            [title]="getSuccessEmptyStateTitle()"
            [description]="getSuccessEmptyStateDescription()"
        >
            <mat-icon pxb-empty-icon class="pxb-create-account-invite-empty-state-icon">check_circle</mat-icon>
        </pxb-empty-state>
    </div>
    <mat-divider class="pxb-auth-divider" style="margin-bottom: 16px;"></mat-divider>
    <div class="pxb-auth-action-button-container">
        <button *ngIf="currentPageId !== 3" mat-stroked-button color="primary" (click)="goBack()" style="width: 100px;">
            Back
        </button>
        <pxb-dot-stepper
            *ngIf="currentPageId <= 2"
            [steps]="pageCount"
            [activeStepId]="currentPageId"
        ></pxb-dot-stepper>
        <button
            *ngIf="currentPageId <= 1"
            mat-flat-button
            color="primary"
            [disabled]="!canContinue()"
            (click)="next()"
            style="width: 100px;"
        >
            Next
        </button>
        <button
            *ngIf="currentPageId === 2"
            mat-flat-button
            color="primary"
            [disabled]="!canContinue()"
            (click)="registerAccount()"
            style="width: 100px"
        >
            Next
        </button>
        <button
            *ngIf="currentPageId === 3"
            mat-flat-button
            color="primary"
            (click)="navigateToLogin()"
            style="width: 100%"
        >
            Continue
        </button>
    </div>
</ng-container>
